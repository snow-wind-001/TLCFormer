<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 800 400" width="800" height="400">
  <defs>
    <style>
      .title { font: bold 16px Arial; fill: #1a1a2e; }
      .module { font: bold 12px Arial; fill: white; }
      .label { font: 11px Arial; fill: #333; }
      .formula { font: italic 12px Times; fill: #333; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
    </marker>
    <linearGradient id="grad-frame" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#4CAF50"/>
      <stop offset="100%" style="stop-color:#66BB6A"/>
    </linearGradient>
    <linearGradient id="grad-diff" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#FF9800"/>
      <stop offset="100%" style="stop-color:#FFB74D"/>
    </linearGradient>
    <linearGradient id="grad-motion" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#F44336"/>
      <stop offset="100%" style="stop-color:#EF5350"/>
    </linearGradient>
    <linearGradient id="grad-attention" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#E91E63"/>
      <stop offset="100%" style="stop-color:#EC407A"/>
    </linearGradient>
    <linearGradient id="grad-output" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#2196F3"/>
      <stop offset="100%" style="stop-color:#42A5F5"/>
    </linearGradient>
  </defs>
  
  <rect width="800" height="400" fill="#fafafa"/>
  <text x="400" y="30" text-anchor="middle" class="title">MADA: Motion-Aware Difference Attention</text>
  
  <g transform="translate(30, 60)">
    <rect x="0" y="0" width="80" height="60" rx="5" fill="url(#grad-frame)" stroke="#388E3C" stroke-width="2"/>
    <text x="40" y="35" text-anchor="middle" class="module">I_{t-1}</text>
    <text x="40" y="75" text-anchor="middle" class="label">Frame t-1</text>
    
    <rect x="0" y="100" width="80" height="60" rx="5" fill="url(#grad-frame)" stroke="#388E3C" stroke-width="2"/>
    <text x="40" y="135" text-anchor="middle" class="module">I_t</text>
    <text x="40" y="175" text-anchor="middle" class="label">Frame t</text>
    
    <rect x="0" y="200" width="80" height="60" rx="5" fill="url(#grad-frame)" stroke="#388E3C" stroke-width="2"/>
    <text x="40" y="235" text-anchor="middle" class="module">I_{t+1}</text>
    <text x="40" y="275" text-anchor="middle" class="label">Frame t+1</text>
  </g>
  
  <g transform="translate(160, 60)">
    <circle cx="30" cy="50" r="20" fill="url(#grad-diff)" stroke="#F57C00" stroke-width="2"/>
    <text x="30" y="55" text-anchor="middle" class="module">-</text>
    <circle cx="30" cy="180" r="20" fill="url(#grad-diff)" stroke="#F57C00" stroke-width="2"/>
    <text x="30" y="185" text-anchor="middle" class="module">-</text>
  </g>
  
  <path d="M 110 90 L 140 70" class="arrow"/>
  <path d="M 110 130 L 140 70" class="arrow"/>
  <path d="M 110 130 L 140 200" class="arrow"/>
  <path d="M 110 230 L 140 200" class="arrow"/>
  
  <g transform="translate(220, 60)">
    <rect x="0" y="20" width="80" height="50" rx="5" fill="url(#grad-diff)" stroke="#F57C00" stroke-width="2"/>
    <text x="40" y="50" text-anchor="middle" class="module">|.|</text>
    <text x="40" y="85" text-anchor="middle" class="label">D_pre</text>
    
    <rect x="0" y="150" width="80" height="50" rx="5" fill="url(#grad-diff)" stroke="#F57C00" stroke-width="2"/>
    <text x="40" y="180" text-anchor="middle" class="module">|.|</text>
    <text x="40" y="215" text-anchor="middle" class="label">D_next</text>
  </g>
  
  <path d="M 190 70 L 220 70" class="arrow"/>
  <path d="M 190 200 L 220 200" class="arrow"/>
  
  <g transform="translate(340, 100)">
    <circle cx="30" cy="60" r="25" fill="url(#grad-motion)" stroke="#D32F2F" stroke-width="2"/>
    <text x="30" y="65" text-anchor="middle" class="module">*</text>
    <text x="30" y="105" text-anchor="middle" class="label">Hadamard</text>
    <text x="30" y="120" text-anchor="middle" class="label">Product</text>
  </g>
  
  <path d="M 300 90 L 320 130" class="arrow"/>
  <path d="M 300 200 L 320 170" class="arrow"/>
  
  <g transform="translate(400, 100)">
    <rect x="0" y="20" width="90" height="60" rx="5" fill="url(#grad-motion)" stroke="#D32F2F" stroke-width="2"/>
    <text x="45" y="45" text-anchor="middle" class="module">M_raw</text>
    <text x="45" y="60" text-anchor="middle" style="font: 10px Arial; fill: white;">Motion</text>
    <text x="45" y="95" text-anchor="middle" class="label">Saliency Map</text>
  </g>
  
  <path d="M 370 160 L 400 160" class="arrow"/>
  
  <g transform="translate(520, 100)">
    <rect x="0" y="10" width="100" height="80" rx="5" fill="url(#grad-attention)" stroke="#C2185B" stroke-width="2"/>
    <text x="50" y="35" text-anchor="middle" class="module">F_motion</text>
    <text x="50" y="55" text-anchor="middle" style="font: 10px Arial; fill: white;">Conv-BN-ReLU</text>
    <text x="50" y="70" text-anchor="middle" style="font: 10px Arial; fill: white;">x3 layers</text>
    <text x="50" y="110" text-anchor="middle" class="label">Attention Net</text>
  </g>
  
  <path d="M 490 160 L 520 160" class="arrow"/>
  
  <g transform="translate(650, 130)">
    <circle cx="25" cy="20" r="20" fill="url(#grad-attention)" stroke="#C2185B" stroke-width="2"/>
    <text x="25" y="25" text-anchor="middle" class="module">S</text>
    <text x="25" y="60" text-anchor="middle" class="label">Sigmoid</text>
  </g>
  
  <path d="M 620 160 L 630 150" class="arrow"/>
  
  <g transform="translate(700, 100)">
    <rect x="0" y="20" width="80" height="60" rx="5" fill="url(#grad-attention)" stroke="#C2185B" stroke-width="2"/>
    <text x="40" y="45" text-anchor="middle" class="module">A_motion</text>
    <text x="40" y="60" text-anchor="middle" style="font: 10px Arial; fill: white;">[0,1]</text>
    <text x="40" y="95" text-anchor="middle" class="label">Attention Map</text>
  </g>
  
  <path d="M 690 150 L 700 150" class="arrow"/>
  
  <g transform="translate(50, 310)">
    <rect x="0" y="0" width="700" height="70" rx="8" fill="white" stroke="#E91E63" stroke-width="2"/>
    <text x="350" y="25" text-anchor="middle" class="title" style="fill: #E91E63;">Feature Modulation</text>
    <text x="350" y="55" text-anchor="middle" style="font: 16px Times; fill: #333;">I'_t = I_t * (1 + alpha * A_motion)     where alpha is learnable</text>
  </g>
  
  <g transform="translate(400, 250)">
    <rect x="0" y="0" width="380" height="45" rx="5" fill="#FFF3E0" stroke="#FF9800" stroke-width="1"/>
    <text x="190" y="18" text-anchor="middle" style="font: bold 11px Arial; fill: #E65100;">Physical Prior: Motion Continuity</text>
    <text x="190" y="35" text-anchor="middle" style="font: 10px Arial; fill: #666;">Only changes in consecutive frames are reliable motion</text>
  </g>
</svg>
